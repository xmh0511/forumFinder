import{a as e,p as l,b as t,r as a,c as s,d as n,o,g as i,e as u,f as r,h as d,i as c,j as p,w as m,u as v,t as f,k as h,l as b,m as g,n as y}from"./vendor.fe90de2b.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&l(e)})).observe(document,{childList:!0,subtree:!0})}function l(e){if(e.ep)return;e.ep=!0;const l=function(e){const l={};return e.integrity&&(l.integrity=e.integrity),e.referrerpolicy&&(l.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?l.credentials="include":"anonymous"===e.crossorigin?l.credentials="omit":l.credentials="same-origin",l}(e);fetch(e.href,l)}}();async function V(l,t,a,s){return new Promise((async(n,o)=>{let i=(await e.get(`${l}`,{proxy:s,headers:{}})).data,u=0;for(;-1!==u;)if(u=i.indexOf(t,u),-1!==u){console.log("existence");let e=i.lastIndexOf("href",u)+6,l=i.indexOf('"',e),s=i.substr(e,l-e),n=i.lastIndexOf("<a",u),o=i.indexOf(">",n+2),r=i.indexOf("</",o+1),d=i.substring(o+1,r);a.push({href:`${s}`,subtitle:d}),u+=t.length}n(!0)}))}async function w(e){return new Promise((l=>{e>0?setTimeout((()=>{l(!0)}),e):l(!0)}))}l("data-v-1c35788a");const x={class:"main-body"},$={class:"input-group"},k={class:"input-item"},O=c("div",{class:"title"},[c("span",null,"代理服务器:")],-1),_={class:"input-container"},U={class:"input-item"},C=c("div",{class:"title"},[c("span",null,"论坛域名:")],-1),I={class:"input-container"},E={class:"enable-https"},L=h("https"),N={class:"input-item"},P=c("div",{class:"title"},[c("span",null,"版块路径:")],-1),j={class:"input-container"},T={class:"input-item"},B=c("div",{class:"title"},[c("span",null,"关键词:")],-1),F={class:"input-container"},R={class:"input-item"},S=c("div",{class:"title"},[c("span",null,"扫描范围:")],-1),q={class:"input-container"},A={class:"input-item"},H=c("div",{class:"title"},[c("span",null,"延迟时间:")],-1),J={class:"input-container"},K={class:"input-item"},M=h("开始查找"),z=h("保存结果"),D={class:"progress-container"},G={class:"table-container"},Q=["onClick"];t();const W={setup(e){const l=window.shell,t=a(""),h=a(""),b=a(""),g=a(""),y=a(""),W=a(0),X=a(0),Y=s({list:[]}),Z=a(!0),ee=async()=>{Y.list=[];const e=JSON.parse(g.value),l=!0===Z.value?"https":"http",a=`${l}://${h.value}${b.value}`,s=t.value.split(":"),n=0===t.value.length?null:{host:s[0],port:parseInt(s[1])};let o=await async function(e,l,t,a,s,n){return new Promise((async(o,i)=>{let u=[];console.log(l);let r=0;for(let d=l[0];d<=l[1];d++){r++;const o=e.replace(/{page}/,""+d);await V(o,t,u,a),n(l[1]-l[0]+1,r),d<l[1]&&await w(s)}o(u)}))}(a,e,y.value,n,X.value,((e,l)=>{W.value=(l/e*100).toFixed(2)})),i=[];o.forEach(((e,t)=>{i.push({number:t+1,href:`${l}://${h.value}${"/"===e.href[0]?"":"/"}${e.href}`,text:`${e.subtitle}`})})),console.log(i),Y.list=i},le=n((()=>""===h.value||""===b.value)),te=()=>{let e=[];Y.list.forEach((l=>{e.push(`<p><a href='${l.href}' target="_blank">${l.text}</a></p>`)}));let l=`<html>\n\t\t   <body>\n\t\t       ${e.join("\n")}\n\t\t   </body>\n\t\t</html>`;console.log(l),window.ipcRenderer.send("writeFile",{data:l,key:y.value})};return o((()=>{let e=i().proxy;window.ipcRenderer.on("writeComplete",((l,t)=>{console.log(t),"success"===t.status?e.$alert("保存成功",{confirmButtonText:"确定",callback:e=>{}}):e.$alert(`${t.msg}`,{confirmButtonText:"确定",callback:e=>{}})}))})),(e,a)=>{const s=u("el-input"),n=u("el-checkbox"),o=u("el-button"),i=u("el-progress"),V=u("el-table-column"),w=u("el-table");return r(),d("div",x,[c("div",$,[c("div",k,[O,c("div",_,[p(s,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),placeholder:"请输入内容"},null,8,["modelValue"])])]),c("div",U,[C,c("div",I,[p(s,{modelValue:h.value,"onUpdate:modelValue":a[1]||(a[1]=e=>h.value=e),placeholder:"请输入内容"},null,8,["modelValue"])]),c("div",E,[p(n,{modelValue:Z.value,"onUpdate:modelValue":a[2]||(a[2]=e=>Z.value=e),"true-label":!0,"false-label":!1},{default:m((()=>[L])),_:1},8,["modelValue"])])]),c("div",N,[P,c("div",j,[p(s,{modelValue:b.value,"onUpdate:modelValue":a[3]||(a[3]=e=>b.value=e),placeholder:"/xx/yy[format:{page}]"},null,8,["modelValue"])])]),c("div",T,[B,c("div",F,[p(s,{modelValue:y.value,"onUpdate:modelValue":a[4]||(a[4]=e=>y.value=e),placeholder:"请输入内容"},null,8,["modelValue"])])]),c("div",R,[S,c("div",q,[p(s,{modelValue:g.value,"onUpdate:modelValue":a[5]||(a[5]=e=>g.value=e),placeholder:"[from,to]"},null,8,["modelValue"])])]),c("div",A,[H,c("div",J,[p(s,{modelValue:X.value,"onUpdate:modelValue":a[6]||(a[6]=e=>X.value=e),placeholder:"单位ms"},null,8,["modelValue"])])]),c("div",K,[p(o,{type:"primary",onClick:ee,disabled:v(le)},{default:m((()=>[M])),_:1},8,["disabled"]),p(o,{type:"primary",onClick:te,disabled:0===v(Y).list.length},{default:m((()=>[z])),_:1},8,["disabled"])]),c("div",D,[p(i,{percentage:W.value},null,8,["percentage"])])]),c("div",G,[p(w,{data:v(Y).list,style:{width:"100%"}},{default:m((()=>[p(V,{prop:"number",label:"序号",width:"100"}),p(V,{label:"词条"},{default:m((e=>[c("div",{class:"enable-tap",onClick:t=>{return a=e.row.href,void l.openExternal(a);var a}},f(e.row.text),9,Q)])),_:1})])),_:1},8,["data"])])])}},__scopeId:"data-v-1c35788a"};const X=g({setup:e=>(e,l)=>(r(),b(W,{msg:"Hello Vue 3 + Vite"}))});X.use(y),X.mount("#app");
